<div class="configuration-component" *ngIf="taskContextData && !submitSuccess">
  <h2>{{taskContextData.task.name | capitalize}}</h2>
  <form class="configuration-form" [formGroup]="dynamicForm">
    <div class="configuration-details row" *ngFor="let formField of formFields">
      <div class="col-md-6">
        <label class="label">{{formField.label | capitalize}}</label>
      </div>
      <div class="col-md-6">
        <ng-container [ngSwitch]="formField.inputType">
<!--          enum-->
          <ng-container *ngSwitchCase="'enum'">
            <gu-multiselect [searchable]="false"
                            [selectedValue]="formField.value"
                            [items]="formattedEnumItems[formField.name]"
                            [multiple]="false"
                            [control]="dynamicFormField(formField.name)"
                            bindLabel="name"
                            bindValue="id">
            </gu-multiselect>
          </ng-container>
<!--          string-->
          <gu-input *ngSwitchCase="'string'"
                    type="text"
                    [required]="true"
                    [control]="dynamicFormField(formField.name)"
                    [value]="formField.value"
                    id="dyn-form-str-{{formField.name}}"
          ></gu-input>
<!--          number-->
          <gu-input *ngSwitchCase="'int'"
                    type="number"
                    [required]="true"
                    [control]="dynamicFormField(formField.name)"
                    [value]="formField.value"
                    id="dyn-form-int-{{formField.name}}"
          ></gu-input>
<!--          boolean-->
          <ng-container *ngSwitchCase="'boolean'">
            <gu-multiselect [searchable]="false"
                            [selectedValue]="formField.value"
                            [items]="formattedBooleanItems[formField.name]"
                            [multiple]="false"
                            [control]="dynamicFormField(formField.name)"
                            bindLabel="name"
                            bindValue="id">
            </gu-multiselect>
          </ng-container>
<!--          date-->
          <ng-container *ngSwitchCase="'date'">
            <gu-datepicker
              [control]="dynamicFormField(formField.name)"
              [required]="true"
            ></gu-datepicker>
          </ng-container>
        </ng-container>
      </div>
    </div>
    <div class="d-flex justify-content-start">
      <button *ngIf="!showCloseCaseConfirmation"
              gu-button
              (click)="checkSubmitForm()"
              [disabled]="!dynamicForm.valid || isSubmitting"
              [loading]="isSubmitting">
        Voltooien
      </button>
    </div>
    <ng-container *ngIf="showCloseCaseConfirmation">
      <p>Weet je zeker dat je deze zaak wilt afsluiten? Alle openstaande acties en activiteiten worden beÃ«indigd.</p>
      <div class="d-inline">
        <button gu-button buttonStyle="secondary" size="small" class="mr-2" (click)="showCloseCaseConfirmation = false">Annuleren</button>
        <button gu-button
                buttonStyle="primary"
                size="small"
                (click)="submitForm(true)"
                [disabled]="isSubmitting"
                [loading]="isSubmitting"
        >
          Bevestigen
        </button>
      </div>
    </ng-container>
  </form>
  <gu-message *ngIf="submitHasError" type="warn" [message]="submitErrorMessage">
  </gu-message>
</div>
