<div class="gu-assign-task" *ngIf="taskData">
  <form [formGroup]="assignTaskForm" *ngIf="!submitSuccess">
    <button gu-button
      class="d-block mb-4"
      [disabled]="isSubmitting"
      [loading]="isSubmitting"
      type="primary"
      (click)="assignSelf()">
      Zelf toewijzen
    </button>
    <div class="form-group">
      <p>Of selecteer een gebruiker die u de taak "<strong>{{taskData.name}}</strong>" wilt toewijzen.</p>
      <gu-multiselect (search)="onSearch($event)"
                      [items]="users"
                      [multiple]="false"
                      [control]="assignee"
                      bindLabel="name"
                      bindValue="username"
                      required
                      placeholder="Zoek een gebruiker">
      </gu-multiselect>
    </div>
    <div class="d-flex justify-content-end">
      <button gu-button
        [disabled]="!assignTaskForm.valid || isSubmitting"
        [loading]="isSubmitting"
        type="primary"
        size="large"
        (click)="submitForm()">
        Toewijzen
      </button>
    </div>
    <gu-message *ngIf="submitHasError && submitErrorMessage" type="warn" [message]="submitErrorMessage" class="d-block mt-2"></gu-message>
  </form>
  <gu-success *ngIf="submitSuccess">
    <p class="mb-4">Voltooid</p>
  </gu-success>
</div>
