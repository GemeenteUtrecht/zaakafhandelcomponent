<div class="keten-processen card">
  <h2>Actieve (keten)processen</h2>
  <ng-container *ngIf="isLoading">
    <gu-loading-indicator></gu-loading-indicator>
  </ng-container>
  <ng-container *ngIf="!!data && data.length > 0 !isLoading">
    <div class="keten-processen__actie-buttons-container">
      <gu-button
        (click)="sendMessage(message)"
        *ngFor="let message of data[0].messages"
        type="primary" size="small" class="d-inline-block mr-2 mb-2">
        {{message}}
      </gu-button>
    </div>
    <p class="p--error" *ngIf="sendMessageHasError">{{sendMessageErrorMessage}}</p>
    <div class="keten-processen__taken">
      <h3>Taken</h3>
      <div class="taak" *ngFor="let task of data[0].tasks">
        <p class="p--marginsmall p--bold d-inline-block">{{task.name}}</p>
        <label class="label label--date">{{task.created | date:'fullDate'}}</label>
        <div class="taak__buttons">
          <gu-button type="secondary" size="small">Claimen</gu-button>
          <gu-button type="secondary" size="small" (click)="executeTask(task.id)">Uitvoeren</gu-button>
        </div>
      </div>
      <ng-container *ngFor="let subProcess of data[0].subProcesses">
        <div class="taak" *ngFor="let task of subProcess.tasks">
          <p class="p--marginsmall p--bold d-inline-block" *ngIf="task.name">{{task.name}}</p>
          <label class="label label--date">{{task.created | date:'fullDate'}}</label>
          <gu-chip
            *ngIf="!!task.assignee"
            type="primary"
            class="d-inline-block mb-3">
            {{task.assignee.username}}
          </gu-chip>
          <div class="taak__buttons">
            <gu-button type="secondary">Claimen</gu-button>
            <gu-button type="secondary" (click)="executeTask(subProcess.id)">Uitvoeren</gu-button>
          </div>
        </div>
      </ng-container>
    </div>
    <gu-button
      type="secondary"
      (click)="openModal('custom-modal-1')">
      Configureer adviseren/accorderen
    </gu-button>
    <gu-button
      type="secondary"
      (click)="openModal('custom-modal-2')">
      Document selecteren
    </gu-button>
    <gu-button
      type="secondary"
      (click)="openModal('custom-modal-3')">
      Document ondertekenen
    </gu-button>
    <gu-button
      type="secondary"
      (click)="openModal('custom-modal-4')">
      Dynamische form
    </gu-button>
  </ng-container>
  <ng-container *ngIf="!!data && data.length === 0 && !isLoading">
    <p>Er zijn geen actieve (keten)processen.</p>
  </ng-container>
</div>
<!--<gu-button (click)="openModal('custom-modal-1')">-->
<!--  Uitvoeren-->
<!--</gu-button>-->
<gu-modal
  id="custom-modal-1"
  [closeIcon]="true"
  title="Adviesvraag configureren"
>
  <gu-config-adviseren-accorderen
  ></gu-config-adviseren-accorderen>
</gu-modal>
<gu-modal
  id="custom-modal-2"
  [closeIcon]="true"
  title="Selecteer documenten bijdragezaak"
><gu-document-select></gu-document-select>
</gu-modal>
<gu-modal
  id="custom-modal-3"
  [closeIcon]="true"
  title="Digitale ondertekening"
><gu-sign-document></gu-sign-document>
</gu-modal>
<gu-modal
  id="custom-modal-4"
  [closeIcon]="true"
  title="Dynamische form"
><gu-dynamic-form></gu-dynamic-form>
</gu-modal>
