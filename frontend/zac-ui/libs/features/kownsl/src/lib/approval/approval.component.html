<div class="kownsl__container">
  <!--  Loading -->
  <ng-template [ngIf]="(!approvalData && isLoading) && !submitSuccess">
    <gu-loading-indicator></gu-loading-indicator>
  </ng-template>

  <!-- Main content -->
  <ng-template [ngIf]="(approvalData && !isLoading) && !submitSuccess">
    <section>
      <h1 class="">Accordering gevraagd</h1>
      <div class="row no-gutters">
        <div class="col-4">
          <p class="p p--bold">Ingediend op:</p>
        </div>
        <div class="col-8">
          <p class="p">{{approvalData.created}}</p>
        </div>
      </div>
      <div class="row no-gutters">
        <div class="col-4">
          <p class="p p--bold">Toelichting:</p>
        </div>
        <div class="col-8">
          <p class="p p--nomargin">
            {{approvalData.toelichting}}
          </p>
        </div>
      </div>
    </section>

    <!-- Collapsible table with previous approvals -->
    <section>
      <h2 class="mb-4">Vorige accorderingen</h2>
      <gu-table
        [tableData]="tableData"
      ></gu-table>
    </section>

    <section>
      <h2 class="mb-4">Documenten</h2>
      <div class="mb-1" *ngFor="let file of approvalData.zaak_documents">
        <gu-file
          [fileName]="file.name"
          [downloadUrl]="file.download_url"
        ></gu-file>
      </div>
    </section>
    <form [formGroup]="approvalForm">
      <section>
        <label class="h2 d-inline-block">Antwoord</label>
        <div class="row">
          <div class="col-12 col-md-6">
            <gu-radio id="1" label="Akkoord" value="true" radioFormControl="approval"></gu-radio>
          </div>
          <div class="col-12 col-md-6">
            <gu-radio id="2" label="Niet akkoord" value="false" radioFormControl="approval"></gu-radio>
          </div>
        </div>
      </section>

      <section>
        <label class="h2 d-inline-block" for="textarea_approval">Toelichting</label>
        <span class="label label--optional">optioneel</span>
        <span class="label label--hint">Toelichting op uw antwoord</span>
        <textarea formControlName="explanation" class="mb-0" id="textarea_approval"></textarea>
      </section>
      <div class="d-flex justify-content-end">
        <gu-button
          [disabled]="!approvalForm.valid"
          [loading]="isSubmitting"
          type="primary"
          size="large"
          (click)="submitForm()">Accordering bevestigen</gu-button>
      </div>
    </form>
  </ng-template>

  <!-- Success screen -->
  <ng-template [ngIf]="submitSuccess">
    <gu-success>
      <h3 class="mb-4">Bedankt voor je reactie</h3>
      <gu-button (click)="submitSuccess = false">
        Terug
      </gu-button>
    </gu-success>
  </ng-template>
</div>
