<div class="workstack">
  <h1>Werkvoorraad</h1>
  <gu-loading-indicator *ngIf="isLoading"></gu-loading-indicator>
  <gu-tab-group *ngIf="!isLoading" [selectedIndex]="currentActiveTab || 0">
    <ng-container *ngFor="let tab of tabs; let i = index">
      <gu-tab>
        <ng-container [ngSwitch]="tab.component">

          <!-- Zaken -->
          <div class="tab-content" *ngSwitchCase="'zaken'">

            <!-- Label -->
            <ng-template mat-tab-label>
              {{tab.label}}
              <gu-chip *ngIf="zakenData?.length > 0"
                       type="badge"
                       color="primary"
                       class="ml-1">
                {{zakenData?.length}}
              </gu-chip>
            </ng-template>

            <!-- Content -->
            <gu-table *ngIf="zakenTableData.bodyData.length > 0; else noZaken"
                      (sortOutput)="fetchZaken($event)"
                      [sortable]="true"
                      [table]="zakenTableData"
            ></gu-table>
            <ng-template #noZaken>
              <p>Er zijn geen zaken gevonden.</p>
            </ng-template>
          </div>

          <!-- Tasks -->
          <div class="tab-content" *ngSwitchCase="'tasks'">
            <!-- Label -->
            <ng-template mat-tab-label>
              {{tab.label}}
              <gu-chip *ngIf="taskData?.length > 0"
                       type="badge"
                       color="primary"
                       class="ml-1">
                {{taskData?.length}}
              </gu-chip>
            </ng-template>

            <!-- Content -->
            <ng-container *ngIf="taskData?.length > 0; else noTasks" >
                <a *ngFor="let userTask of taskData"
                   class="anchor mb-2 task-link"
                   [routerLink]="createZaakLink(userTask.zaak, userTask.task)">
                  {{userTask.zaak.identificatie}}: {{userTask.task.name}}
                </a>
              </ng-container>
            <ng-template #noTasks>
              <p>Er zijn geen taken gevonden.</p>
            </ng-template>
          </div>

          <!-- Group tasks -->
          <div class="tab-content" *ngSwitchCase="'group-tasks'">
            <!-- Label -->
            <ng-template mat-tab-label>
              {{tab.label}}
              <gu-chip *ngIf="groupTaskData?.length > 0"
                       type="badge"
                       color="primary"
                       class="ml-1">
                {{groupTaskData?.length}}
              </gu-chip>
            </ng-template>

            <!-- Content -->
            <ng-container *ngIf="groupTaskData?.length > 0; else noGroupTasks" >
              <a *ngFor="let groupTask of groupTaskData"
                 class="anchor mb-2 task-link"
                 [routerLink]="createZaakLink(groupTask.zaak, groupTask.task)">
                {{groupTask.zaak.identificatie}}: {{groupTask.task.name}}
              </a>
            </ng-container>
            <ng-template #noGroupTasks>
              <p>Er zijn geen taken voor gebruikersgroepen.</p>
            </ng-template>
          </div>

          <!-- Activiteiten -->
          <div class="tab-content" *ngSwitchCase="'activities'">

            <!-- Label -->
            <ng-template mat-tab-label>
              {{tab.label}}
              <gu-chip *ngIf="activitiesData?.length > 0"
                       type="badge"
                       color="primary"
                       class="ml-1">
                {{activitiesData?.length}}
              </gu-chip>
            </ng-template>

            <!-- Content -->
            <ng-container *ngIf="activitiesData?.length > 0; else noActivity" >
              <a *ngFor="let activity of activitiesData"
                 class="anchor mb-2 task-link"
                 [routerLink]="createActivityLink(activity.zaak)">
                {{activity.zaak.identificatie}}: {{activity.activities[0].name}}
              </a>
            </ng-container>
            <ng-template #noActivity>
              <p>Er zijn geen ad-hoc activiteiten gevonden.</p>
            </ng-template>
          </div>

          <!-- Toegangsverzoeken -->
          <div class="tab-content" *ngSwitchCase="'access-request'">

            <!-- Label -->
            <ng-template mat-tab-label>
              {{tab.label}}
              <gu-chip *ngIf="accessRequestData?.length > 0"
                       type="badge"
                       color="primary"
                       class="ml-1">
                {{accessRequestData?.length}}
              </gu-chip>
            </ng-template>

            <!-- Content -->
            <gu-access-request [data]='accessRequestData' (reload)="reloadWorkstack(3)"></gu-access-request>
          </div>
        </ng-container>
      </gu-tab>
    </ng-container>
  </gu-tab-group>
</div>
